function [ X_out, Y_out, annot ] = formatBF2AO( features, labels, segfile, unit_list )
%FORMATBF2AO convert breakfast dataset data to action ordering (ECCV14)
%format
%   Detailed explanation goes here

X_out = cell2mat(features');

K = length(unit_list);

Y_out = cell(length(segfile), 1);
for k = 1:length(Y_out)
    numFrames = size(features{k}, 1);
    y = zeros(numFrames, K);
    seg = segfile{k};
    
    for i = 1:length(seg.segment_name)
        a_idx = find(strcmp(seg.segment_name{i}, unit_list));
        if isempty(a_idx)
            warning('segment_name not found vid: %d, seg: %d', k, i);
        else
            y(, a_idx)
        end
    end
end

end

